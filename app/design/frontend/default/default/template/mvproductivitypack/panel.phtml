<?php
/* @var $this ZetaPrints_MvProductivityPack_Block_Panel */
$_helper = Mage::helper('MvProductivityPack');
$_type = $this->_getType();

?>

<?php if ($_helper->isReviewerLogged()): ?>

<div id="productivity-panel">
  <div id="productivity-panel-content" class="clearer">

  <?php if ($_type == 'product'): ?>

    <div id="productivity-actions">
    <?php if ($_helper->isAdminLogged()): ?>
      <a href="<?php echo $this->_getProductLink(); ?>"><?php echo $this->__('Product in admin'); ?></a><br>
    <?php endif; ?>
      <a href="#" onclick="this.hide(); $('productivity-edit-form').show(); return false;"><?php echo $this->__('Edit product details') ?></a>
    </div>

    <div id="productivity-uploader">
      <div id="productivity-uploader-element"></div>

      <div id="productivity-uploader-dropzone-wrapper">
        <div id="productivity-uploader-dropzone"></div>
      </div>

      <ul id="productivity-uploader-previews"></ul>
    </div>

<?php /*
       * A quick form for editing select attributes in a hurry.
       */ ?>
    <div id="productivity-edit-attributes">
      <div id="productivity-edit-form" style="display: none;">
        <?php echo $this->getEditForm()->setHtmlIdPrefix('productivity-edit-')->toHtml() ?>
      </div>
    </div>

  <?php endif; ?>

  <?php if ($_helper->isAdminLogged() && ($_type == 'page' || $_type == 'index') && ($link = $this->_getCmsPageLink())): ?>
  <a href="<?php echo $link ?>"><?php echo $this->__('CMS page in admin'); ?></a>
  <?php endif; ?>

  <?php if ($_type == 'category'): ?>
    <a href="<?php echo $this->_getWithoutImagesLink() ?>"><?php echo $this->__('Show products without images'); ?></a>

    <?php if ($_helper->isAdminLogged() && ($link = $this->_getCategoryLink())): ?>
    <a href="<?php echo $link ?>"><?php echo $this->__('Category in admin'); ?></a>
    <?php endif; ?>

  <?php endif; ?>

  </div>
</div>

<?php endif; ?>

<script type="text/javascript">
//<![CDATA[

jQuery(function ($) {
  var $panel = $('#productivity-panel');

  $panel
    .on('mouseenter dragover', function () {
      $panel.addClass('productivity-hovered');
    })
    .on('mouseleave', function () {
      $panel.removeClass('productivity-hovered');
    });
});

//]]>
</script>
